<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_invoice_document_valiryo" inherit_id="account.report_invoice_document">
      <xpath expr="/t[1]/t[1]/div[1]/table[1]/tbody[1]/t[3]/tr[1]/t[1]/td[2]/span[1]" position="attributes">
        <attribute name="t-options-widget">"integer"</attribute>
      </xpath>
      <xpath expr="/t[1]/t[1]/div[1]/table[1]/tbody[1]/t[3]/tr[1]/t[1]/td[3]/span[1]" position="attributes">
        <attribute name="t-options-widget">"monetary"</attribute>
      </xpath>
      <xpath expr="/t[1]/t[1]/div[1]/table[1]/tbody[1]/t[3]/tr[1]/t[1]/td[6]/span[1]" position="attributes">
        <attribute name="t-options-widget">"monetary"</attribute>
      </xpath>
      <xpath expr="/t[1]/t[1]/div[1]/p[1]" position="attributes">
        <attribute name="t-if"/>
      </xpath>
      <xpath expr="/t[1]/t[1]/div[1]/t[2]" position="replace"/>

        <xpath expr="//p[@name='comment']" position="replace"/>
        <xpath expr="//p[@name='payment_term']" position="replace"/>
        <xpath expr="//p[@name='payment_communication']" position="replace"/>
        <xpath expr="//p[@name='note']" position="replace"/>
        <xpath expr="//p[@name='incoterm']" position="replace"/>
        <xpath expr="//div[@id='qrcode']" position="replace"/>
        
        <xpath expr="//div[hasclass('page')]" position="inside">
            <div class="row">
                <div class="col-7">
                    <p t-if="o.move_type in ('out_invoice', 'in_refund') and o.payment_reference" name="payment_communication" style="display:none">
                        Please use the following communication for your payment : <b><span t-field="o.payment_reference"/></b>
                    </p>
                    <p t-if="o.invoice_payment_term_id" name="payment_term">
                        <span t-field="o.invoice_payment_term_id.note"/>
                    </p>
                    <div class="row">
                      <div class="col h2">
                        <span>Terms and Conditions</span>
                      </div>
                    </div>
                    <p t-if="o.narration" name="comment" >
                        <span t-field="o.narration"/>
                    </p>
                    <div class="row">
                      <div class="col h2">
                        <span>Payment mode</span>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col">
                        <span t-field="o.payment_mode_id.note"/>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col">
                        <span>Please use the following communication for your payment: </span>
                        <span t-field="o.invoice_origin"/>
                      </div>
                    </div>
                    <p t-if="o.fiscal_position_id.note" name="note">
                        <span t-field="o.fiscal_position_id.note"/>
                    </p>
                    <p t-if="o.invoice_incoterm_id" name="incoterm">
                        <strong>Incoterm: </strong><span t-field="o.invoice_incoterm_id.code"/> - <span t-field="o.invoice_incoterm_id.name"/>
                    </p>
                    <div id="qrcode" t-if="o.display_qr_code">
                        <p t-if="qr_code_urls.get(o.id)">
                            <strong class="text-center">Scan me with your banking app.</strong><br/><br/>
                            <img class="border border-dark rounded" t-att-src="qr_code_urls[o.id]"/>
                        </p>
                    </div>
                </div>
                <div class="col-5">
                    <img class="img-fluid" src="/valiryo/static/src/img/sello_valiryo.png"/>
                </div>
            </div>
        </xpath>
        
<!--       <xpath expr="/t/t/div/p[3]" position="after">
        <div class="row">
          <div class="col h2">
            <span>Payment mode</span>
          </div>
        </div>
      </xpath>
      <xpath expr="/t/t/div/div[5]" position="after">
        <div class="row">
          <div class="col">
            <span t-field="o.payment_mode_id.note"/>
          </div>
        </div>
      </xpath>
      <xpath expr="/t/t/div/div[6]" position="after">
        <div class="row">
          <div class="col">
            <span>Please use the following communication for your payment: </span>
            <span t-field="o.invoice_origin"/>
          </div>
        </div>
      </xpath> -->
      <xpath expr="/t[1]/t[1]/div[1]/table[1]/tbody[1]/t[3]/tr[1]/t[1]/td[5]/span[1]" position="attributes">
        <attribute name="t-esc">line.discount</attribute>
      </xpath>
      <xpath expr="/t/t/div/table/thead/tr/th[3]" position="attributes">
        <attribute name="class" separator=" " add="text-right"/>
      </xpath>
      <xpath expr="/t/t/div/table/thead/tr/th[5]" position="replace">
        <th name="th_taxes" t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
          <span>% disc</span>
        </th>
      </xpath>
      <xpath expr="/t/t/div/h2" position="before">
        <div class="row">
          <div class="col">
            <span><p><br/>“The exporter of the products covered by this document [customs authorisation No ESEAOR19000018], declares that, except where otherwise clearly indicated, these products are of European Union (Spain) preferential origin”</p></span>
          </div>
        </div>
      </xpath>
      <xpath expr="/t/t/div/div[4]/div" position="attributes">
        <attribute name="style" separator=";" add="margin-top:10px"/>
      </xpath>
      <xpath expr="/t/t/div/div[4]/div" position="attributes">
        <attribute name="style" separator=";" add="margin-bottom:10px"/>
      </xpath>
      <xpath expr="/t/t/div/div[1]" position="before"><div class="row"><div class="col h2"><span>Shipping address</span></div></div></xpath>
      <xpath expr="/t/t/div/div[1]" position="after"><div class="row address"><div class="col-5"><div t-field="o.partner_shipping_id" t-options-widget="'contact'"/></div><div class="col-5 offset-2"/></div></xpath>
    </template>
</odoo>